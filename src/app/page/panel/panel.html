<div class="panel-wrapper">
  <div class="panel-container">
    <h2 class="panel-title">Panel de Control del Sistema</h2>

    <!-- Mensaje institucional -->
    <div *ngIf="message"
         class="alert alert-{{messageType}} text-center rounded-3 shadow-sm mb-4 panel-alert-message"
         role="alert">
      {{ message }}
    </div>

    <!-- Tarjetas principales -->
    <ng-container *ngIf="!hasActiveChildRoute">
      <div class="panel-card-grid">
        <div *ngFor="let card of cards">
          <div
            class="panel-card-option"
            [ngClass]="{
              'opacity-75-subtle': isCardDisabled(card),
              'cursor-not-allowed': isCardDisabled(card),
              'border-bottom border-4 border-primary': card.className === 'admin-card',
              'border-bottom border-4 border-success': card.className === 'user-card',
              'border-bottom border-4 border-warning': card.className === 'general-info-card'
            }"
            (click)="navigateTo(card.route, card)"
            [attr.aria-disabled]="isCardDisabled(card) ? 'true' : 'false'"
            [style.cursor]="isCardDisabled(card) ? 'not-allowed' : 'pointer'">

            <div class="card-body panel-card-content d-flex flex-column align-items-center justify-content-center w-100">
              <i class="bi panel-control-icon bi-{{ card.icon }}"
                 [ngClass]="{
                   'text-primary': card.className === 'admin-card' && !isCardDisabled(card),
                   'text-success': card.className === 'user-card' && !isCardDisabled(card),
                   'text-warning': card.className === 'general-info-card' && !isCardDisabled(card),
                   'text-muted': isCardDisabled(card)
                 }"></i>

              <h4 class="panel-card-title">{{ card.title }}</h4>
              <p class="panel-card-description">{{ card.description }}</p>
              <p class="panel-card-description fw-bold">{{ card.description2 }}</p>
            </div>

            <!-- Overlay de acceso denegado -->
            <div *ngIf="isCardDisabled(card)"
                 class="panel-overlay-restricted position-absolute top-0 start-0 w-100 h-100 d-flex flex-column align-items-center justify-content-center">
              <i class="bi bi-lock-fill panel-overlay-icon mb-2"></i>
              <span class="panel-overlay-text fw-bold fs-6">Acceso Restringido</span>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</div>
